<!DOCTYPE html>
<html>
<head>
  <title>IoT Temperature Monitoring</title>
  <style>
    body { font-family: Arial; text-align: center; }
    .card {
      display: inline-block;
      padding: 20px;
      margin: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px #aaa;
      width: 220px;
    }
  </style>
</head>
<body>

<h1>IoT Temperature & Humidity Dashboard</h1>

<div class="card">
  <h2>Temperature</h2>
  <p id="temp">-- °C</p>
</div>

<div class="card">
  <h2>Humidity</h2>
  <p id="hum">-- %</p>
</div>

<div style="margin-top:10px;">
  <small id="status">Status: idle</small>
</div>

<script>
// Use the correct ThingSpeak channel ID (provided by you)
const url = "https://api.thingspeak.com/channels/3272831/feeds.json?api_key=ZLLHL9EPP9OWJNV0&results=1";

async function fetchData() {
  const statusEl = document.getElementById('status');
  try {
    statusEl.innerText = 'Status: fetching...';
    const res = await fetch(url);
    if (!res.ok) {
      console.error('HTTP error', res.status, res.statusText);
      statusEl.innerText = `Status: HTTP ${res.status}`;
      return;
    }
    const data = await res.json();
    console.log('ThingSpeak response:', data);
    const feed = data && data.feeds && data.feeds[0];
    if (!feed) {
      statusEl.innerText = 'Status: no feed data';
      document.getElementById('temp').innerText = '-- °C';
      document.getElementById('hum').innerText = '-- %';
      return;
    }
    document.getElementById('temp').innerText = (feed.field1 ?? '--') + ' °C';
    document.getElementById('hum').innerText = (feed.field2 ?? '--') + ' %';
    statusEl.innerText = 'Status: updated';
  } catch (err) {
    console.error('Fetch error:', err);
    document.getElementById('status').innerText = 'Status: fetch error (see console)';
  }
}

fetchData();
setInterval(fetchData, 5000);
</script>

</body>
</html>